<?php/* --------------------------------------------------------------------- *                        Exercice 4-001                            * Nom du fichier: ajout.php  * Auteur:  * Date: Janvier 2008 * Description: Ce script permet de stocker des adresses emails  * 				dans une base de données                              * --------------------------------------------------------------------- */// Variables// $email = htmlspecialchars($_POST['email']);$go = (int) $_POST['go'];?><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Exercice 4-001</title></head><body><?phpif ($go == true){	if (empty($email) == true){		echo "<h4>Votre adresse email ne peut pas être nulle!</h4>";			exit;	}		// on se connecte à la base de données	$link = mysql_connect("localhost:8889","root","root");	if (!$link){		echo "Problème de connexion à la base de données";		exit;	}	if (!mysql_select_db("emsc-tchat")){		echo "Problème de connexion à la base de données";		exit;	}	// on insère les informations dans la base de données	$sql = "INSERT INTO liste_email 				(email, date_inscription) 				VALUES ('$email', NOW())";							//echo $sql;												$res = mysql_query($sql);							if ($res == false OR mysql_affected_rows($link) < 1){		echo "<h4>Problème d'insertion dans la base de données</h4>";			exit; 	}	echo "<h4>Merci de vous être inscrit!</h4>";}else {?><h2>Ajouter un email</h2><form name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">  <p>Email<br />    <input type="text" name="email" />  </p>  <p>  	<input name="go" type="hidden" value="1" />    <input type="submit" name="Submit" value="S'inscrire">    <br />  </p></form><?php}?></body></html>